# React

데이터가 바뀌면 화면이 바뀐다.

# 상태관리

화면에 필요한 데이터- front
서비스에 필요한 데이터 - back

로그인을 만든다하면

userid, userpw

input 박스에 사용자가 아이디와 패스워드를 입력한다.
그리고 backend에 요청을 보내게 된다.. 그리고 back 은 front 에 응답을 준다.

front 는 토큰을 받고 저장한 후 isLogin -> true로 바꾼다.

어떻게 저장되어있을까?.....`state`..

상태라는 것은 캐시 or 메모리와 비슷하다. 상태라는 것을 단순히 말하면 javascript의 변수이다.

```js
let isLogin = false
isLogin = true

//새로고침 후
console.log(isLogin) // false
```

isLogin 같은 데이터는 새로고침할 때 로그인상태가 풀리면 안되기 때문에 따로 저장해야한다.

`js`에서 변수를 어떻게 영구적으로 저장할까?

`React`는 어떤 런타임을 사용하고 있나 ? - 브라우저

예전에 `localStorage`을 이용하여 게시판을 만들었는데 새로고침 하더라도 데이터가 남아있었다.
데이터를 지우지 않는 이상 데이터가 유지가 된다.
isLogin같은 특별한 값은 localStorage에 저장하여 관리한다.

React에서는 로그인만 구현해도 다한것이다.. 라고 했던 것은 백엔드, 런타임 등등 이해도가 높아야 구현을 잘 할 수 있기 때문이다.

단순히 로컬스토리지에 저장하는것으로 끝이 아니라
새로고침이 이루어졌을 때 로컬스토리지에 데이터가 있는지 확인하고
있으면 로컬스토리지에 있는 변수 내용을 isLogin에다가 넣어줘 라는 로직이 필요하다.

> 라이브러리가 존재하기는 한다.

# 로그인 프로세스

## CSR 방식...

리액트는 csr이다.

7번과정에서 set-cookie 이기 때문에 응답을 받으면 바로 쿠키가 생성됨 8. 쿠키를 확인해서 isLogin상태를 바꾸고 localstorage에 값을 넣어준다.

새로고침하게 되면 이제 localstorage의 내용을 확인한다..

전역 상태로 관리하는 것은 보통 유저 정보이다.

# store

1. 새로고침이 이루어 졌을 때

로컬스토리지 저장 : localStorage.setItem()
로컬스토리지 불러오기 : localStorage.getItem()

로컬스토리지에 데이터가 정확하게 들어있다면 새로고침을 하더라도 로그인을 유지한다.

2. 상태가 바뀌었을 때

컴포넌트가 실행된다해도 랜더를 할 필요없다.
그래서 jsx 파일에 그냥 로그아웃을 하는 함수를 실행시켜도 된다.

그러면 지금 dispatch는 현제 상태
밑에...는 storagte

reducer을 실행하면 바꿀 객체를 만들어주는 것이지 상태가 바뀌는 것이 아니다.

# CORS

출처와 도메인이 다를경우에 요청이 안된다. (브라우저에서)
브라우저와 백엔드서버가 포트가 다르기 때문에 cors에러

쿠키를 주고 받을 때 크레덴셜?처리를 해야 줄 수 있다. cors에 민감...

# JWT

JWT는 인증 방식 중 하나이고 쿠키 안에 들어갈 데이터이다.
oauth2.0 : 인증 프로토콜 중에 하나 (카카오도 이 프로토콜을 따름)...나중에 oauth를 이용한 서버를 만들어보는것도 좋음.
